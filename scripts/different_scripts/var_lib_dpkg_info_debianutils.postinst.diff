--- /media/mks/5dcae443-0796-4029-ae6c-bf5bd2a37067/var/lib/dpkg/info/debianutils.postinst	2015-04-26 10:59:54.000000000 -0400
+++ /media/mks/armbi_root/var/lib/dpkg/info/debianutils.postinst	2023-07-28 19:46:35.000000000 -0400
@@ -1,27 +1,36 @@
 #! /bin/sh -e
 
-if test -z "$2" && test ! -f /etc/shells
+ua() {
+	update-alternatives --install /usr/bin/which which /usr/bin/which.debianutils 0 \
+		--slave /usr/share/man/man1/which.1.gz which.1.gz /usr/share/man/man1/which.debianutils.1.gz \
+		--slave /usr/share/man/de/man1/which.1.gz which.de1.gz /usr/share/man/de/man1/which.debianutils.1.gz \
+		--slave /usr/share/man/es/man1/which.1.gz which.es1.gz /usr/share/man/es/man1/which.debianutils.1.gz \
+		--slave /usr/share/man/fr/man1/which.1.gz which.fr1.gz /usr/share/man/fr/man1/which.debianutils.1.gz \
+		--slave /usr/share/man/it/man1/which.1.gz which.it1.gz /usr/share/man/it/man1/which.debianutils.1.gz \
+		--slave /usr/share/man/ja/man1/which.1.gz which.ja1.gz /usr/share/man/ja/man1/which.debianutils.1.gz \
+		--slave /usr/share/man/pl/man1/which.1.gz which.pl1.gz /usr/share/man/pl/man1/which.debianutils.1.gz \
+		--slave /usr/share/man/sl/man1/which.1.gz which.sl1.gz /usr/share/man/sl/man1/which.debianutils.1.gz
+}
+
+if test -z "$2" && test ! -f "$DPKG_ROOT/etc/shells"
 then
-        cp -p /usr/share/debianutils/shells /etc/shells
+	cp -pZ "$DPKG_ROOT/usr/share/debianutils/shells" "$DPKG_ROOT/etc/shells" || cp -p "$DPKG_ROOT/usr/share/debianutils/shells" "$DPKG_ROOT/etc/shells"
 fi
 
 case "$1" in
-    configure)
-    if which update-mime >/dev/null;
-    then
-	    update-mime
-    fi
-    if [ ! -e /usr/bin/which ]
-    then
-	    ln -s /bin/which /usr/bin/which
-    fi
+    (configure)
+	update-shells
+	ua
+    ;;
+    (triggered)
+	update-shells
     ;;
 
-    abort-upgrade|abort-remove|abort-deconfigure)
-
+    (abort-upgrade|abort-remove|abort-deconfigure)
+	ua
     ;;
 
-    *)
+    (*)
         echo "postinst called with unknown argument \`$1'" >&2
         exit 1
     ;;
