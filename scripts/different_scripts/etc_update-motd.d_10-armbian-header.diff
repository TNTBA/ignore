--- /media/mks/5dcae443-0796-4029-ae6c-bf5bd2a37067/etc/update-motd.d/10-armbian-header	2024-03-12 21:28:36.483274443 -0400
+++ /media/mks/armbi_root/etc/update-motd.d/10-armbian-header	2023-12-12 11:04:09.000000000 -0500
@@ -12,9 +12,23 @@
 THIS_SCRIPT="header"
 MOTD_DISABLE=""
 
+# Read image configuration
+[[ -f /etc/armbian-image-release ]] && . /etc/armbian-image-release
+VENDORTEMP="${VENDOR}"
+
+# Read update configuration
 [[ -f /etc/armbian-release ]] && . /etc/armbian-release
-[[ -f /etc/armbian-distribution-status ]] && . /etc/armbian-distribution-status
-[[ -f /etc/lsb-release && -f /etc/armbian-distribution-status ]] && DISTRIBUTION_CODENAME=$(cat /etc/lsb-release | grep CODENAME | cut -d"=" -f2) && DISTRIBUTION_STATUS=$(cat /etc/armbian-distribution-status | grep $DISTRIBUTION_CODENAME | cut -d"=" -f2)
+
+# Keep the VENDOR from image if its defined there
+[[ -n "${VENDORTEMP}" && "${VENDORTEMP}" != "${VENDOR}" ]] && VENDOR="${VENDORTEMP}"
+
+if [[ -f /etc/armbian-distribution-status ]]; then
+	. /etc/armbian-distribution-status
+	[[ -f /etc/lsb-release ]] && DISTRIBUTION_CODENAME=$(grep CODENAME /etc/lsb-release | cut -d"=" -f2)
+	[[ -z "$DISTRIBUTION_CODENAME" && -f /etc/os-release ]] && DISTRIBUTION_CODENAME=$(grep VERSION_CODENAME /etc/os-release | cut -d"=" -f2)
+	[[ -z "$DISTRIBUTION_CODENAME" && -x /usr/bin/lsb_release ]] && DISTRIBUTION_CODENAME=$(/usr/bin/lsb_release -c | cut -d":" -f2 | tr -d "\t")
+	DISTRIBUTION_STATUS=$(grep "$DISTRIBUTION_CODENAME" /etc/armbian-distribution-status | cut -d"=" -f2)
+fi
 [[ -f /etc/default/armbian-motd ]] && . /etc/default/armbian-motd
 
 for f in $MOTD_DISABLE; do
@@ -25,10 +39,10 @@
 KERNELID=$(uname -r)
 
 # Odroid N2 exception
-[[ -f /proc/device-tree/model ]] && [[ -n $(cat /proc/device-tree/model | tr -d '\000' | grep ODROID | grep Plus) ]] && BOARD_NAME+="+"
+[[ -f /proc/device-tree/model ]] && [[ -n $(tr -d '\000' < /proc/device-tree/model | grep ODROID | grep Plus) ]] && BOARD_NAME+="+"
 
-TERM=linux toilet -f standard -F metal $(echo 'GIGA')
-echo -e "Welcome to \e[0;91mArmbian ${VERSION} ${DISTRIBUTION_CODENAME^}\x1B[0m with $([[ $BRANCH == edge ]] && echo -e "\e[0;91mbleeding\x1B[0m edge " )\e[0;91mLinux $KERNELID\x1B[0m\n"
+TERM=linux toilet -f standard -F metal $(echo $BOARD_NAME | sed 's/Orange Pi/OPi/' | sed 's/NanoPi/NPi/' | sed 's/Banana Pi/BPi/')
+echo -e "Welcome to \e[0;91m${VENDOR} ${VERSION} ${DISTRIBUTION_CODENAME^}\x1B[0m with $([[ $BRANCH == edge ]] && echo -e "\e[0;91mbleeding\x1B[0m edge " )\e[0;91mLinux $KERNELID\x1B[0m\n"
 
 # displaying status warnings
 
