--- /media/mks/5dcae443-0796-4029-ae6c-bf5bd2a37067/etc/kernel/postinst.d/xx-initramfs-cleanup	2022-07-21 02:19:01.000000000 -0400
+++ /media/mks/armbi_root/etc/kernel/postinst.d/xx-initramfs-cleanup	2023-12-12 11:04:09.000000000 -0500
@@ -1,15 +1,5 @@
 #!/bin/sh
-
-version="$1"
-
-[ -x /usr/sbin/update-initramfs ] || exit 0
-
-# passing the kernel version is required
-if [ -z "$version" ]; then
-	echo >&2 "W: initramfs-tools: ${DPKG_MAINTSCRIPT_PACKAGE:-kernel package} did not pass a version number"
-	exit 0
-fi
-
+# echo "DEBUG: postinst: initramfs-clean: cmd: $@" >&2
 # avoid running multiple times
 # This script should be run after the initramfs-tools script
 # and under the same conditions.
@@ -20,8 +10,6 @@
 	fi
 fi
 
-MOD_DIR=/lib/modules/
-
 files="$(find /boot -maxdepth 1 -name 'initrd.img-*' -o -name 'uInitrd-*')"
 
 for f in $files; do
@@ -31,7 +19,7 @@
 done
 
 check_boot_dev (){
-	available_size_boot_device=$(df -h | awk '/boot$/{print $4}')
+	available_size_boot_device=$(findmnt --noheadings --output AVAIL --target /boot)
 	echo "Free space after deleting the package $DPKG_MAINTSCRIPT_PACKAGE in /boot: $available_size_boot_device" >&2
 }
 mountpoint -q /boot && check_boot_dev
