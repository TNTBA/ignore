--- /media/mks/5dcae443-0796-4029-ae6c-bf5bd2a37067/home/mks/crowsnest/libs/init_stream.sh	2023-12-15 01:50:44.410398135 -0500
+++ /media/mks/armbi_root/home/mks/crowsnest/libs/init_stream.sh	2024-08-07 08:44:43.325744626 -0400
@@ -26,11 +26,19 @@
         mode="$(get_param "cam ${cams}" mode)"
         check_section "${cams}"
         case ${mode} in
-            mjpg | mjpeg)
-                MJPG_INSTANCES+=( "${cams}" )
+            [mM]ulti | camera-streamer)
+                if [[ "$(is_raspberry_pi)" = "1" ]] &&
+                [[ "$(is_ubuntu_arm)" = "0" ]] &&
+                [[ "$(is_pi5)" = "0" ]]; then
+                    MULTI_INSTANCES+=( "${cams}" )
+                else
+                    log_msg "WARN: Mode 'camera-streamer' is not supported on your device!"
+                    log_msg "WARN: Falling back to Mode 'ustreamer'"
+                    MJPG_INSTANCES+=( "${cams}" )
+                fi
             ;;
-            rtsp)
-                RTSP_INSTANCES+=( "${cams}" )
+            mjpg | mjpeg | ustreamer)
+                MJPG_INSTANCES+=( "${cams}" )
             ;;
             ?|*)
                 unknown_mode_msg
@@ -39,12 +47,12 @@
             ;;
         esac
     done
+    if [ "${#MULTI_INSTANCES[@]}" != "0" ]; then
+        run_multi "${MULTI_INSTANCES[*]}"
+    fi
     if [ "${#MJPG_INSTANCES[@]}" != "0" ]; then
         run_mjpg "${MJPG_INSTANCES[*]}"
     fi
-    if [ "${#RTSP_INSTANCES[@]}" != "0" ]; then
-        run_rtsp "${RTSP_INSTANCES[*]}"
-    fi
     sleep 2 & sleep_pid="$!" ; wait "${sleep_pid}"
     log_msg " ... Done!"
 }
