--- /media/mks/5dcae443-0796-4029-ae6c-bf5bd2a37067/var/lib/dpkg/info/openssh-server.config	2020-01-31 15:55:34.000000000 -0500
+++ /media/mks/armbi_root/var/lib/dpkg/info/openssh-server.config	2024-06-22 15:38:08.000000000 -0400
@@ -10,10 +10,10 @@
 	[ -f /etc/ssh/sshd_config ] || return
 
 	# TODO: actually only one '=' allowed after option
-	perl -lne '
-		s/[[:space:]]+/ /g; s/[[:space:]]+$//;
-		print if s/^[[:space:]]*'"$option"'[[:space:]=]+//i' \
-	   /etc/ssh/sshd_config 2>/dev/null
+	sed -E -n -e 's/[[:space:]]+/ /g' -e 's/[[:space:]]+$//' \
+		-e 's/^[[:space:]]*'"$option"'[[:space:]=]+//Ip' \
+		/etc/ssh/sshd_config 2>/dev/null
+
 }
 
 permit_root_login="$(get_config_option PermitRootLogin)" || true
@@ -33,14 +33,4 @@
 	fi
 fi
 
-if dpkg --compare-versions "$2" lt-nl 1:6.6p1-1 && \
-   [ "$permit_root_login" = yes ]; then
-	if [ "$(getent shadow root | cut -d: -f2)" = "!" ]; then
-		db_set openssh-server/permit-root-login true
-	else
-		db_input high openssh-server/permit-root-login || true
-		db_go
-	fi
-fi
-
 exit 0
